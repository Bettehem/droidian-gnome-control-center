From: Luciano da Silva Ribas <lucribas@users>
Date: Thu, 22 Sep 2022 23:00:24 -0300
Subject: network: Fixed Network profiles shown on wrong device

Added missing interface name during network profile creation.

Bug: https://gitlab.gnome.org/GNOME/gnome-control-center/-/issues/353
Origin: upstream, 43.1, commit:ee53bfd8b6bbbd018fdd7a2b1ea33e5a44a1b43b
---
 panels/network/net-device-ethernet.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/panels/network/net-device-ethernet.c b/panels/network/net-device-ethernet.c
index 3cf64b0..1bd0083 100644
--- a/panels/network/net-device-ethernet.c
+++ b/panels/network/net-device-ethernet.c
@@ -395,8 +395,10 @@ add_profile_button_clicked_cb (NetDeviceEthernet *self)
         NMSettingConnection *sc;
         g_autofree gchar *uuid = NULL;
         g_autofree gchar *id = NULL;
+        g_autoptr(GError) error = NULL;
         NetConnectionEditor *editor;
         const GPtrArray *connections;
+        const char *iface;
 
         connection = nm_simple_connection_new ();
         sc = NM_SETTING_CONNECTION (nm_setting_connection_new ());
@@ -414,6 +416,16 @@ add_profile_button_clicked_cb (NetDeviceEthernet *self)
                       NM_SETTING_CONNECTION_AUTOCONNECT, TRUE,
                       NULL);
 
+        iface = nm_device_get_iface (self->device);
+        if (nm_utils_is_valid_iface_name (iface, &error)) {
+            g_object_set (sc,
+                          NM_SETTING_CONNECTION_INTERFACE_NAME, iface,
+                          NULL);
+        } else {
+            g_warning ("Invalid interface Name '%s': %s", iface, error->message);
+            g_error_free (error);
+        }
+
         nm_connection_add_setting (connection, nm_setting_wired_new ());
 
         editor = net_connection_editor_new (connection, self->device, NULL, self->client);
